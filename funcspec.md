# 機能仕様書: 国土地理院 地形図ビューア

## 1. 概要

本アプリケーションは、Webブラウザ上で国土地理院の地図を表示するシンプルなプログレッシブウェブアプリケーション（PWA）です。
Leaflet.jsライブラリを利用して地図の表示や操作を実現し、Service Workerによるオフラインキャッシュ機能も備えています。

## 2. 画面構成

- アプリケーションは単一のページで構成されます。
- 画面全体に地図が表示され、他のUI要素（ボタン、メニューなど）は存在しません。

## 3. 機能一覧

### 3.1. PWA対応

- **Service Worker**:
  - アプリケーションの起動時にService Worker (`sw.js`) を登録します。
  - 主要なファイル (`/`, `index.html`, `manifest.json`, `app.js`) をキャッシュし、オフライン時や低速なネットワーク環境でも高速に表示します。
- **Web App Manifest**:
  - `manifest.json` を提供し、「ホーム画面に追加」機能に対応します。
  - インストール後はスタンドアロンモードで起動し、ネイティブアプリのように表示されます。

### 3.2. 地図表示機能

- **ライブラリ**: 地図の表示には Leaflet.js (v1.9.4) を使用します。
- **初期表示**:
  - 地図の初期中心位置は「箕面大滝」（緯度: 34.853667, 経度: 135.472041）に設定されます。
  - 初期ズームレベルは `15` に設定されます。

### 3.3. 地図タイル表示機能

- **タイルソース**: 国土地理院が提供する「標準地図」のタイル画像を使用します。
- **著作権表示**: 地図の右下には、タイルソースの著作権情報として「地理院タイル」へのリンクが表示されます。

### 3.4. マーカー表示機能

- 地図の初期中心位置である「箕面大滝」にマーカーが1つ設置されます。
- このマーカーにはポップアップが紐付けられており、アプリケーション起動時に「箕面大滝」というテキストが自動で表示されます。

## 4. 使用技術

- HTML5
- CSS3
- JavaScript
- Leaflet.js v1.9.4
- Progressive Web Apps (PWA)
  - Service Worker
  - Web App Manifest

## 5. ファイル構成

```
/
├── index.html       # メインのHTMLファイル
├── app.js           # アプリケーションのロジック
├── sw.js            # Service Worker スクリプト
├── manifest.json    # Web App Manifest
└── icons/           # アプリアイコン
    ├── MapIcon-192.png
    └── MapIcon-512.png
```